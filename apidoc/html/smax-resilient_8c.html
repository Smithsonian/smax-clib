<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>smax-clib: src/smax-resilient.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="smithsonian-logo-55x55.png"/></td>
  <td id="projectalign">
   <div id="projectname">smax-clib<span id="projectnumber">&#160;v0.9</span>
   </div>
   <div id="projectbrief">A C/C++ client library for SMA-X</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('smax-resilient_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">smax-resilient.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This module adds trusty push delivery to SMA-X. If the server cannot be reached, push requests are stored and updated locally until the server connection is restored, at which point they are delivered.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5f5e00f0fd063ac8e36827c852131358" id="r_a5f5e00f0fd063ac8e36827c852131358"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5f5e00f0fd063ac8e36827c852131358">smaxIsResilient</a> ()</td></tr>
<tr class="separator:a5f5e00f0fd063ac8e36827c852131358"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a469095a9a74a8ce5d6bbae347d7194e5" id="r_a469095a9a74a8ce5d6bbae347d7194e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a469095a9a74a8ce5d6bbae347d7194e5">smaxSetResilient</a> (boolean value)</td></tr>
<tr class="separator:a469095a9a74a8ce5d6bbae347d7194e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae638a5b4c82119eea5ef7a0ba2cd40c1" id="r_ae638a5b4c82119eea5ef7a0ba2cd40c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae638a5b4c82119eea5ef7a0ba2cd40c1">smaxSetResilientExit</a> (boolean value)</td></tr>
<tr class="separator:ae638a5b4c82119eea5ef7a0ba2cd40c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This module adds trusty push delivery to SMA-X. If the server cannot be reached, push requests are stored and updated locally until the server connection is restored, at which point they are delivered. </p>
<dl class="section date"><dt>Date</dt><dd>Aug 14, 2019 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Attila Kovacs</dd></dl>
<p>This way, push requests are guaranteed to make it to the database sooner or later as long as the calling program keeps running.</p>
<p>It's mainly useful for daemons that generate infrequent data for the database. It's not especially meaningful for simple executables, which are run for limited time without persistence.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a469095a9a74a8ce5d6bbae347d7194e5">smaxSetResilient()</a> </dd>
<dd>
<a class="el" href="#a5f5e00f0fd063ac8e36827c852131358">smaxIsResilient()</a> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a5f5e00f0fd063ac8e36827c852131358" name="a5f5e00f0fd063ac8e36827c852131358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f5e00f0fd063ac8e36827c852131358">&#9670;&#160;</a></span>smaxIsResilient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean smaxIsResilient </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks whether the resiliency feature has been enabled.</p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if enabled, otherwise FALSE.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a469095a9a74a8ce5d6bbae347d7194e5">smaxSetResilient()</a> </dd></dl>

</div>
</div>
<a id="a469095a9a74a8ce5d6bbae347d7194e5" name="a469095a9a74a8ce5d6bbae347d7194e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a469095a9a74a8ce5d6bbae347d7194e5">&#9670;&#160;</a></span>smaxSetResilient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void smaxSetResilient </td>
          <td>(</td>
          <td class="paramtype">boolean</td>          <td class="paramname"><span class="paramname"><em>value</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enables the resiliency feature of the library, which keeps track of local changes destined to the database when the database is not reachable, and sending all locally stored updates once the database comes online again. However, after sending all pending updates to the remote server, the program may exit (default behavior), unless <a class="el" href="#ae638a5b4c82119eea5ef7a0ba2cd40c1">smaxSetResilientExit()</a> is set to FALSE (0), so that it can be restarted in a fresh state, setting up subscriptions and scripts again as necessary.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>TRUE (non-zero) to enable, or FALSE (0) to disable resiliency.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a5f5e00f0fd063ac8e36827c852131358">smaxIsResilient()</a> </dd>
<dd>
<a class="el" href="#ae638a5b4c82119eea5ef7a0ba2cd40c1">smaxSetResilientExit()</a> </dd></dl>

<p class="reference">References <a class="el" href="smax_8c.html#ad63c425cc3affdf8bc803c7ff8dd6e30">smaxAddConnectHook()</a>, and <a class="el" href="smax_8c.html#a4708c3c699781abec237045c48719f3d">smaxRemoveConnectHook()</a>.</p>

</div>
</div>
<a id="ae638a5b4c82119eea5ef7a0ba2cd40c1" name="ae638a5b4c82119eea5ef7a0ba2cd40c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae638a5b4c82119eea5ef7a0ba2cd40c1">&#9670;&#160;</a></span>smaxSetResilientExit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void smaxSetResilientExit </td>
          <td>(</td>
          <td class="paramtype">boolean</td>          <td class="paramname"><span class="paramname"><em>value</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets whether the program should exit in resilient mode, after having pushed all local updates. The default is to exit since the reconnecting in resilient mode does not by itself re-establish existing subscriptions. However, when subscriptions aren't used, or if they are set up as a connect hook, the user may want the program to simply continue. This is possible by passing FALSE (0) as the argument to this call. This setting only takes effect when resilient mode is enabled. Otherwise, the exit policy is set by the RedisX library.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>Whether to exit the program after all local updates have been pushed to SMA-X after a recovering from an outage.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a469095a9a74a8ce5d6bbae347d7194e5">smaxSetResilient()</a> </dd>
<dd>
<a class="el" href="smax_8c.html#ad63c425cc3affdf8bc803c7ff8dd6e30">smaxAddConnectHook()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="smax-resilient_8c.html">smax-resilient.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
